{% extends "layout.html" %}
{% block title %}Home{% endblock %}
{% block head %}

    <script src="{{ url_for('static', filename='index.js') }}"></script>

{% endblock %}

{% block content %}



<div id="connectArea">
    <div id="receiptListContainer">
        <ul id="receiptList">
            {% for receipt in receipts %}
                <li>
                    <span class="date">{{ receipt.date }}</span>
                    <span class="title">{{ receipt.note }}</span>
                    <span class="total">{{ receipt.total }}</span>
                </li>
            {% endfor %}
        </ul>
    </div>
    <div id="imagesArea">
        <div class="actions">
            <div class="group">
                <a href="#1">Connect</a>
                <a href="#1">Cash</a>
            </div>
            <div class="group">
                <a data-actionType="rotate_left" href="#2">Rotate left</a>
                <a data-actionType="rotate_right" href="#2">Rotate right</a>

                <a data-actionType="zoom_in" href="#2">Zoom in</a>
                <a data-actionType="zoom_out" href="#2">Zoom out</a>

            </div>
        </div>
        <div id="imagePreview">

        </div>
        <div id="imageListContainer">
            <div class="scrollarea">

                <ul id="imageList">
                    {% for image in images %}
                        <li>
                            <img src="/receipt_thumb/{{image.uid}}/thumb" data-imguid="{{image.uid}}"/>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

    </div>
</div>


<script language="javascript">
    $(window).addEvent('resize',IndexController.resizeWorkingArea);

    $(window).addEvent('load', function() {
        IndexController.resizeWorkingArea(); // this sets layout almost perfect, but takes into account scrollbar
                                             // which hides in some point

        IndexController.resizeWorkingArea(); // now we recalculate layout without scrollbar, so everything now fits
                                             // perfectly
    });

    //IndexController.resizeWorkingArea();


    $(window).addEvent('domready', function() {
        IndexController.initializePanView();
        IndexController.initializeActionsHandlers();
        IndexController.initializeThumbnailSwitcher();

        IndexController.loadImage('0B_V-GNTsCHGEclljQWdZQ1ZwNHM');
    });
</script>

{% endblock %}